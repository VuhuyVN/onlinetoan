<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>H·ªçp L·ªõp Online (PeerJS)</title>
  <style>
    body { background:#0e0e0e; color:white; text-align:center; font-family:sans-serif; }
    video { width:45%; border-radius:12px; margin:10px; background:#222; }
    input,button { padding:10px; border:none; border-radius:8px; margin:5px; }
    button { background:#ffcc00; font-weight:bold; cursor:pointer; }
  </style>
</head>
<body>
  <h2>üé• H·ªçp L·ªõp Online</h2>
  <video id="myVideo" autoplay muted playsinline></video>
  <video id="otherVideo" autoplay playsinline></video><br>
  <input id="room" placeholder="Nh·∫≠p t√™n ph√≤ng..." />
  <button id="joinBtn">Tham gia</button>

  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script>
    const myVideo = document.getElementById('myVideo');
    const otherVideo = document.getElementById('otherVideo');
    const joinBtn = document.getElementById('joinBtn');
    const roomInput = document.getElementById('room');

    let peer, myStream;

    async function init() {
      myStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      myVideo.srcObject = myStream;
    }

    init();

    joinBtn.onclick = () => {
      const room = roomInput.value.trim();
      if (!room) return alert("Nh·∫≠p t√™n ph√≤ng!");

      peer = new Peer(room, { host: 'peerjs.com', secure: true, port: 443 });

      peer.on('open', id => console.log("ID:", id));

      peer.on('call', call => {
        call.answer(myStream);
        call.on('stream', stream => {
          otherVideo.srcObject = stream;
        });
      });

      // G·ªçi ng∆∞·ªùi kh√°c
      const otherID = prompt("Nh·∫≠p ID ng∆∞·ªùi b·∫°n (ho·∫∑c ƒë·ªÉ tr·ªëng n·∫øu b·∫°n l√† ng∆∞·ªùi t·∫°o):");
      if (otherID) {
        const call = peer.call(otherID, myStream);
        call.on('stream', stream => {
          otherVideo.srcObject = stream;
        });
      }
    };
  </script>
</body>
</html>
